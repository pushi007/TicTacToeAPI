<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
	<changeSet author="Pushpendra" id="20161027-02">
		<modifyDataType columnName="task_edited_date"
			newDataType="timestamp" tableName="task" schemaName="moyadev" />
	</changeSet>
	<changeSet author="Pushpendra" id="20161027-06">
		<createView replaceIfExists="true" schemaName="moyadev"
			viewName="task_view"> SELECT t.id,
           t.task_for_level,
           t.task_for_organization,
           t.task_for_user,
           t.task_of_event,
           t.task_for_district,
           t.task_for_state,
           t.remarks,
           t.task_status,
           t.task_edited_by,
           t.task_edited_date,
           e.event_start_date,
           e.event_end_date,           
           e.event_title,
           g.geographic_name as task_state_name,
           gd.geographic_name as task_district_name                    
      FROM moyadev.task t left join  moyadev.event e on t.task_of_event = e.id left join moyadev.geographic_data g on t.task_for_state=g.id left join moyadev.geographic_data gd on t.task_for_district=gd.id</createView>
	</changeSet>
</databaseChangeLog>
